@model List<MyPhotoDreamApp.Domain.ViewModels.Order.OrderViewModel>
@{
    ViewData["Title"] = "Detail";
}

<h1 class="header-text-top">Корзина</h1>

<hr />
<div class="row">
	<div class="col-md-4">
		<table class="iksweb">
			<thead>
				<tr>
					<td>№</td>
					<td>Наименование</td>
					<td>Цена</td>
					<td>Количество</td>
					<td>Сумма</td>
					<td></td>
				</tr>
			</thead>
			<tbody>
				@{
					int i = 0;
					decimal finalSumm = 0;
				}
				@foreach (var item in Model)
				{
					i++;
					<tr>
						<td>@i.ToString()</td>
						<td>
							<a asp-action="" asp-controller="Order" asp-route-Id="@item.Id">@item.ProductName</a>
						</td>
						<td>@item.Price</td>
						<td>@item.Quantity</td>
						@{var summ = item.Price * item.Quantity;}
						@{finalSumm += summ;}
						<td>@summ</td>
						<td>
							<form method="post" asp-route-Id="@item.Id" asp-action="DelOrder" asp-controller="Order">
								<input type="submit" value="Удалить" />
							</form>
						</td>
					</tr>
				}
			</tbody>
		</table>
			<form method="post" asp-route-Id="" asp-route-FinalSumm="@finalSumm" asp-action="" asp-controller="">
			<h4>Итого к оплате: @finalSumm ₽</h4>
			<p><input type="submit" value="Подтвердить заказ" /></p>
			</form>
		<p><a asp-action="Index" asp-controller="Home">Вернуться в каталог сервисов</a></p>

	</div>
</div>